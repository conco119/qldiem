CREATE TABLE `sinhvien` (
	`masv` varchar(128) NOT NULL ,
	`tensv` varchar(128) NOT NULL,
	`malop` varchar(128) NOT NULL,
	`ngaysinh` DATE NOT NULL,
	`gioitinh` varchar(128) NOT NULL,
	`diachi` varchar(128) NOT NULL,
	`email` varchar(128) NOT NULL,
	`sdt` varchar(128) NOT NULL,
	`password` varchar(128) NOT NULL,
	PRIMARY KEY (`masv`)
);

CREATE TABLE `lop` (
	`malop` varchar(128) NOT NULL ,
	`tenlop` varchar(128) NOT NULL,
	`manganh` varchar(128) NOT NULL,
	`namnhaphoc` varchar(128) NOT NULL,
	PRIMARY KEY (`malop`)
);

CREATE TABLE `nganh` (
	`manganh` varchar(128) NOT NULL,
	`tennganh` varchar(128) NOT NULL,
	`sonamdt` varchar(128) NOT NULL,
	`makhoa` varchar(128) NOT NULL,
	PRIMARY KEY (`manganh`)
);

CREATE TABLE `hocphan` (
	`mahp` varchar(128) NOT NULL,
	`tenhp` varchar(128) NOT NULL,
	`sotc` INT(128) NOT NULL,
	`sotietly` varchar(128),
	`so_tiet_th` varchar(128),
	PRIMARY KEY (`mahp`)
);

CREATE TABLE `giangvien` (
	`magv` varchar(128) NOT NULL,
	`tengv` varchar(128) NOT NULL,
	`ngaysinh` DATE NOT NULL,
	`gioitinh` varchar(128) NOT NULL,
	`email` varchar(128) NOT NULL,
	`password` varchar(128) NOT NULL,
	`role` varchar(128) NOT NULL,
	PRIMARY KEY (`magv`)
);

CREATE TABLE `khoa` (
	`makhoa` varchar(128) NOT NULL,
	`tenkhoa` varchar(128) NOT NULL,
	PRIMARY KEY (`makhoa`)
);

CREATE TABLE `hocky` (
	`mahocky` varchar(128) NOT NULL,
	PRIMARY KEY (`mahocky`)
);

CREATE TABLE `ctbangdiem` (
	`mabd` varchar(128) NOT NULL,
	`masv` varchar(128) NOT NULL,
	`mahp` varchar(128) NOT NULL,
	`magv` varchar(128) NOT NULL,
	`mahocky` varchar(128) NOT NULL,
	`malanhoc` varchar(128) NOT NULL,
	`diemcc` FLOAT,
	`diemgk` FLOAT,
	`diemth` FLOAT,
	`diemkt` FLOAT,
	`tongket` FLOAT NOT NULL,
	`diemchu` varchar(128) NOT NULL,
	`diemthilai` FLOAT,
	`diemct` FLOAT
);
CREATE TABLE `bangdiem`(
	`mabd` varchar(128) NOT NULL,
	`masv` varchar(128) NOT NULL UNIQUE,
	PRIMARY KEY (`mabd`)
);
CREATE TABLE `lanhoc` (
	`malanhoc` varchar(128) NOT NULL,
	PRIMARY KEY (`malanhoc`)
);


ALTER TABLE `sinhvien` ADD CONSTRAINT `sinhvien_fk0` FOREIGN KEY (`malop`) REFERENCES `lop`(`malop`) on update cascade on delete cascade ;


ALTER TABLE `lop` ADD CONSTRAINT `lop_fk1` FOREIGN KEY (`manganh`) REFERENCES `nganh`(`manganh`) on update cascade on delete cascade;

ALTER TABLE `nganh` ADD CONSTRAINT `nganh_fk0` FOREIGN KEY (`makhoa`) REFERENCES `khoa`(`makhoa`) on update cascade on delete cascade;

ALTER TABLE `bangdiem` ADD CONSTRAINT `bangdiem_fk0` FOREIGN KEY (`masv`) REFERENCES `sinhvien`(`masv`) on update cascade on delete cascade;

ALTER TABLE `ctbangdiem` ADD CONSTRAINT `ctbangdiem_fk0` FOREIGN KEY (`masv`) REFERENCES `bangdiem`(`masv`) on update cascade on delete cascade;

ALTER TABLE `ctbangdiem` ADD CONSTRAINT `ctbangdiem_fk1` FOREIGN KEY (`mahp`) REFERENCES `hocphan`(`mahp`) on update cascade on delete cascade;

ALTER TABLE `ctbangdiem` ADD CONSTRAINT `ctbangdiem_fk2` FOREIGN KEY (`mahocky`) REFERENCES `hocky`(`mahocky`) on update cascade on delete cascade;

ALTER TABLE `ctbangdiem` ADD CONSTRAINT `ctbangdiem_fk3` FOREIGN KEY (`magv`) REFERENCES `giangvien`(`magv`) on update cascade on delete cascade;

ALTER TABLE `ctbangdiem` ADD CONSTRAINT `ctbangdiem_fk4` FOREIGN KEY (`malanhoc`) REFERENCES `lanhoc`(`malanhoc`) on update cascade on delete cascade;


ALTER TABLE `ctbangdiem` ADD CONSTRAINT `ctbangdiem_fk5` FOREIGN KEY (`mabd`) REFERENCES `bangdiem`(`mabd`) on update cascade on delete cascade;
